function R(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var p={exports:{}};/*!
 * Copyright 2019 SmugMug, Inc.
 * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
 * @license
 */var l;function m(){if(l)return p.exports;l=1;var d=p.exports=function(s){this.top=s.top,this.left=s.left,this.width=s.width,this.spacing=s.spacing,this.targetRowHeight=s.targetRowHeight,this.targetRowHeightTolerance=s.targetRowHeightTolerance,this.minAspectRatio=this.width/s.targetRowHeight*(1-s.targetRowHeightTolerance),this.maxAspectRatio=this.width/s.targetRowHeight*(1+s.targetRowHeightTolerance),this.edgeCaseMinRowHeight=s.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=s.edgeCaseMaxRowHeight,this.widowLayoutStyle=s.widowLayoutStyle,this.isBreakoutRow=s.isBreakoutRow,this.items=[],this.height=0};return d.prototype={addItem:function(s){var h=this.items.concat(s),c=this.width-(h.length-1)*this.spacing,e=h.reduce(function(o,g){return o+g.aspectRatio},0),i=c/this.targetRowHeight,t,r,a;return this.isBreakoutRow&&this.items.length===0&&s.aspectRatio>=1?(this.items.push(s),this.completeLayout(c/s.aspectRatio,"justify"),!0):e<this.minAspectRatio?(this.items.push(Object.assign({},s)),!0):e>this.maxAspectRatio?this.items.length===0?(this.items.push(Object.assign({},s)),this.completeLayout(c/e,"justify"),!0):(t=this.width-(this.items.length-1)*this.spacing,r=this.items.reduce(function(o,g){return o+g.aspectRatio},0),a=t/this.targetRowHeight,Math.abs(e-i)>Math.abs(r-a)?(this.completeLayout(t/r,"justify"),!1):(this.items.push(Object.assign({},s)),this.completeLayout(c/e,"justify"),!0)):(this.items.push(Object.assign({},s)),this.completeLayout(c/e,"justify"),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(s,h){var c=this.left,e=this.width-(this.items.length-1)*this.spacing,i,t,r,a,o,g;(typeof h>"u"||["justify","center","left"].indexOf(h)<0)&&(h="left"),t=Math.max(this.edgeCaseMinRowHeight,Math.min(s,this.edgeCaseMaxRowHeight)),s!==t?(this.height=t,i=e/t/(e/s)):(this.height=s,i=1),this.items.forEach(function(n){n.top=this.top,n.width=n.aspectRatio*this.height*i,n.height=this.height,n.left=c,c+=n.width+this.spacing},this),h==="justify"?(c-=this.spacing+this.left,r=(c-this.width)/this.items.length,a=this.items.map(function(n,w){return Math.round((w+1)*r)}),this.items.length===1?(o=this.items[0],o.width-=Math.round(r)):this.items.forEach(function(n,w){w>0?(n.left-=a[w-1],n.width-=a[w]-a[w-1]):n.width-=a[w]})):h==="center"&&(g=(this.width-c)/2,this.items.forEach(function(n){n.left+=g+this.spacing},this))},forceComplete:function(s,h){typeof h=="number"?this.completeLayout(h,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}},p.exports}/*!
 * Copyright 2019 SmugMug, Inc.
 * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
 * @license
 */var u,f;function b(){if(f)return u;f=1;var d=m();function s(e,i){var t;return e.fullWidthBreakoutRowCadence!==!1&&(i._rows.length+1)%e.fullWidthBreakoutRowCadence===0&&(t=!0),new d({top:i._containerHeight,left:e.containerPadding.left,width:e.containerWidth-e.containerPadding.left-e.containerPadding.right,spacing:e.boxSpacing.horizontal,targetRowHeight:e.targetRowHeight,targetRowHeightTolerance:e.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*e.targetRowHeight,edgeCaseMaxRowHeight:2*e.targetRowHeight,rightToLeft:!1,isBreakoutRow:t,widowLayoutStyle:e.widowLayoutStyle})}function h(e,i,t){return i._rows.push(t),i._layoutItems=i._layoutItems.concat(t.getItems()),i._containerHeight+=t.height+e.boxSpacing.vertical,t.items}function c(e,i,t){var r=[],a,o,g;return e.forceAspectRatio&&t.forEach(function(n){n.forcedAspectRatio=!0,n.aspectRatio=e.forceAspectRatio}),t.some(function(n,w){if(isNaN(n.aspectRatio))throw new Error("Item "+w+" has an invalid aspect ratio");if(o||(o=s(e,i)),a=o.addItem(n),o.isLayoutComplete()){if(r=r.concat(h(e,i,o)),i._rows.length>=e.maxNumRows)return o=null,!0;if(o=s(e,i),!a&&(a=o.addItem(n),o.isLayoutComplete())){if(r=r.concat(h(e,i,o)),i._rows.length>=e.maxNumRows)return o=null,!0;o=s(e,i)}}}),o&&o.getItems().length&&e.showWidows&&(i._rows.length?(i._rows[i._rows.length-1].isBreakoutRow?g=i._rows[i._rows.length-1].targetRowHeight:g=i._rows[i._rows.length-1].height,o.forceComplete(!1,g)):o.forceComplete(!1),r=r.concat(h(e,i,o)),e._widowCount=o.getItems().length),i._containerHeight=i._containerHeight-e.boxSpacing.vertical,i._containerHeight=i._containerHeight+e.containerPadding.bottom,{containerHeight:i._containerHeight,widowCount:e._widowCount,boxes:i._layoutItems}}return u=function(e,i){var t={},r={},a={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},o={},g={};return i=i||{},t=Object.assign(a,i),o.top=isNaN(parseFloat(t.containerPadding.top))?t.containerPadding:t.containerPadding.top,o.right=isNaN(parseFloat(t.containerPadding.right))?t.containerPadding:t.containerPadding.right,o.bottom=isNaN(parseFloat(t.containerPadding.bottom))?t.containerPadding:t.containerPadding.bottom,o.left=isNaN(parseFloat(t.containerPadding.left))?t.containerPadding:t.containerPadding.left,g.horizontal=isNaN(parseFloat(t.boxSpacing.horizontal))?t.boxSpacing:t.boxSpacing.horizontal,g.vertical=isNaN(parseFloat(t.boxSpacing.vertical))?t.boxSpacing:t.boxSpacing.vertical,t.containerPadding=o,t.boxSpacing=g,r._layoutItems=[],r._awakeItems=[],r._inViewportItems=[],r._leadingOrphans=[],r._trailingOrphans=[],r._containerHeight=t.containerPadding.top,r._rows=[],r._orphans=[],t._widowCount=0,c(t,r,e.map(function(n){return n.width&&n.height?{aspectRatio:n.width/n.height}:{aspectRatio:n}}))},u}var _=b();const H=R(_);class x extends HTMLElement{resizeobserver;lastsize;images=JSON.parse(this.dataset.images);constructor(){super(),this.sort(),this.resizeobserver=new ResizeObserver(this.debounce(s=>{this.lastsize={width:s[0].contentRect.width,height:s[0].contentRect.height},this.deployLayout()},250)),this.resizeobserver.observe(this)}deployLayout(){const s=this.lastsize,h=this.images.map(e=>{const{width:i,height:t}=e;return i/t}),c=H(h,{containerWidth:s.width,boxSpacing:20,targetRowHeight:300,targetRowHeightTolerance:.5});this.images.map((e,i)=>{const t=document.getElementById(e.alt),r=c.boxes[i].height.toString()+"px",a=c.boxes[i].width.toString()+"px",o=c.boxes[i].top.toString()+"px",g=c.boxes[i].left.toString()+"px";t.style.height=r,t.style.width=a,t.style.top=o,t.style.left=g,t.style.display="block"})}debounce(s,h){let c;return function(...e){clearTimeout(c),c=setTimeout(()=>s(...e),h)}}sort(){this.images.sort((s,h)=>h.filters.show_priority-s.filters.show_priority)}sortrev(){this.images.sort((s,h)=>s.filters.show_priority-h.filters.show_priority)}}customElements.define("images-gallery",x);
